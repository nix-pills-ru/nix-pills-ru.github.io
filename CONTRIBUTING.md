# Как помочь проекту

Вы можете помогать проекту, участвуя в переводе или вычитке текста.

## Задачи

Для каждой из двадцати глав мы создаём одну задачу с двумя этапами: черновой перевод и вычитка.

Например [#17 Перевод Generic Builders 08/20](https://github.com/nix-pills-ru/nix-pills-ru.github.io/issues/17).

Если черновой перевод и вычитку делает один и тот же человек, он должен сделать минимум недельный перерыв между этапами, чтобы *размылить глаз*.

Если их делают разные люди, тогда перерыв не нужен.

Вы можете выбрать себе любую главу, который ещё не назначен исполнитель.

## Черновой перевод

Назначьте на себя незанятую задачу на перевод и создайте ветку с тем же именем, что и номер задачи.
Например для перевода [#17 Перевод Generic Builders 08/20](https://github.com/nix-pills-ru/nix-pills-ru.github.io/issues/17) я создал ветку **17**.

Выполните команды:

```shell
git fetch
git checkout -t origin/17
```

Здесь **origin/17** — ветка **17** в GitHub.

### Конвертация DocBook в markdown

~~Сконвертируйте текст из исходного репозитория **pills/17-generic-builders.xml** в markdown с помощью сервиса [AllDocs](https://alldocs.app/convert-docbook-to-markdown) (или любого другого, который вам нравится).~~

Сконвертируйте текст из исходного репозитория **pills/17-generic-builders.xml** в markdown с помощью `pandoc`:

```bash
pandoc -f docbook -t markdown nix-pills/pills/17-generic-builders.xml -o nix-pills-ru/src/17-generic-builders.md
```

Исходная книга представлена в формате DocBook, но я не умею работать с этим форматом, поэтому предпочёл делать перевод в GitHub Markdown чтобы подготовить книгу с помощью [mdBook](https://github.com/rust-lang/mdBook).

### Предварительная разметка

Получившийся файл **01-generic-builders.md** поместите в каталог **pills**.
Для удобства перевода и особенно для совместной правки средствами git, его необходимо разметить.

Нужно сделать две вещи:

1. Убрать переносы строк, так чтобы каждое предложение было в своей строке.
   Чтобы такой текст было удобно переводить, включите режим переноса слов в своём редакторе. Абзацы надо разделять пустой строкой.

   > ```text
   > What does all this mean?
   > It means that you could run mysql 5.2 with glibc-2.18, and mysql 5.5 with glibc-2.19.
   > You could use your python module with python 2.7 compiled with gcc 4.6 and the same python module with python 3 compiled with gcc 4.8, all in the same system.
   >
   > In other words: no dependency hell, not even a dependency resolution algorithm.
   > Straight dependencies from derivations to other derivations.
   > ```

1. Поставить символ "больше" (&gt;) в начало каждой строки с текстом, включая заголовки, но исключая примеры кода.
   Таким образом весь оригинальный английский текст станет цитатами.

### Черновой перевод

Черновой перевод делается сразу за оригинальным текстом по абзацам, уже без цитирования.

```text
> ## Mutable vs. immutable

## Изменяемость против неизменяемости

> When upgrading a library, most package managers replace it in-place.
> All new applications run afterwards with the new library without being recompiled.
> After all, they all refer dynamically **libc6.so**.

При обновлении библиотеки большинство пакетных менеджеров переписывают её поверх предыдущей версии.
Затем все новые приложения запускаются с новой библиотекой без перекомпиляции.
Помимо всего прочего, все они динамически загружают **libc6.so**.
```

При черновом переводе больше внимания уделяйте точности, а не красоте слога.
Постарайтесь не переносить смысл между отдельными предложениями.
Если хотите оставить пояснения или соображения для последюущей вычитки, поместите его в XML-комментарий \<\!-- вот так -->.

Продолжайте следовать правилу: каждое предлоежение в своей строке. Это помогает при совместной правке перевода в **GitHub** или в **kdiff3**.

### Чек-лист «завершаем черновой перевод»

Завершив перевод:
* Поставьте ссылку на главу в [SUMMARY.md](src/SUMMARY.md).
* Отправьте все коммиты в центральный репозиторий.
* В задаче (issue) поставьте галочку напротив пункта "черновой перевод".
* Отредактируйте задачу (issue) и допишите у пункту "черновой перевод" дату завершения.
  Это делать необязательно, потому что дату окончания перевода можно вывести по коммитам.
  Просто правило хорошего тона.

## Вычитка

Ищите задачи с назначенным исполнителем, в которых стоит галочка "черновой перевод", но не стоит галочка "вычитка".
Назначьте на себя задачу и поставьте галочку "вычитка".
Загрузите изменения из центрального репозитория и переключитесь на ветку с черновым переводом:

```shell
git fetch
git checkout -t origin/17
```

Здесь **origin/17** — ветка **17** в GitHub.

### Повторный перевод

Ещё раз прочитайте текст на английском языке и переведите его на русский.
Затем сравните свой перевод с черновиком.
Если смысл текста передан верно, проверьте, что текст читается легко.
Если текст перегружен или неестественен, отредактируйте его.

На этом этапе можно переносить смысл между предложениями.
Можно менять английские идиомы на русские, похожие по смыслу.
Если не можете подобрать идиому, от неё можно отказаться, переведя по смыслу.
В трудных случаях можно делать сноски и писать там комментарии переводчика.

### Чистка

После вычитки удалите из текста оригинальный английский текст.
Он помечен символом "больше", поэтому здесь всё легко и просто.
Удалите комментарии переводчика.

### Завершаем вычитку

Завершив вычитку, отправьте все изменения в центральный репозиторий и создайте Pull Request.
Когда он будет принят, задача будет закрыта и ветка будет удалена автоматически

Ветку в локальном репозитории удалите самостоятельно.